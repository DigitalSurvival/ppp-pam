#summary How to build and install PPP-PAM from the source code.
#labels Featured,Phase-Deploy

_*Please note that these instructions differ from the initial instructions published in the GRC newsgroups.  The most recent instructions will appear here, so you should always check for the latest version of this page before attempting to build the code.*_

= Mac OSX =

The following should work on *Tiger* and *Leopard* for both *Intel* and *Power PC* Macs:

 # Download version 0.2 of the source code from [http://ppp-pam.googlecode.com/files/ppp-pam-0.2.tar.gz here] and save to your disk.
 # Open a terminal window and extract the source files.
{{{
tar -xvzf ppp-pam-0.2.tar.gz
cd ppp-pam
}}}
 # Build the code
{{{
cd build
../configure
make
}}}
 # Test to confirm it built correctly
{{{
make test
}}}
 # Install the {{{pppauth}}} utility and PAM module in the appropriate folders. (You will need to enter your administrator password to run the following command).
{{{
sudo make install
}}}
 # Enable PPP authentication for ssh connections.
{{{
sudo chmod +w /etc/pam.d/sshd
sudo open -a TextEdit /etc/pam.d/sshd
}}}
  Enter the following line just above the line with {{{pam_securityserver.so}}}
  {{{
  auth       required       pam_ppp.so
  }}}
 # Save the file and close TextEdit.
 # Create a PPP sequence key for your user account.
{{{
pppauth --key
}}}
 # Print some passcards.
{{{
pppauth --html --next 3
}}}
 # Try logging in to test it.
{{{
ssh localhost
}}}

= Linux =

It's still not working reliably enough on all distributions of linux.  I need to do more portability work, but it is getting closer!

 # Make sure you have the appropriate packages installed.  On a fresh Ubuntu distribution, I had to install the following packages:
   * subversion
   * make
   * gcc
   * g++
   * libc6-dev
   * uuid-dev
   * libpam0g-dev
   * openssh-server
 # Follow steps 1-5 of the Mac OSX installation above.
 # Enable PPP authentication for ssh connections.  (Feel free to use your preferred editor rather than vi).  The specifics here may vary depending on your linux distribution.  If you find that they deviate significantly, please post a comment here.
{{{
sudo vi /etc/pam.d/ssh
}}}
  Enter the following line just below {{{@include common-auth}}}
  {{{
  auth       required       pam_ppp.so
  }}}
 # Close and save the file.
 # Make sure you have the following settings in {{{/etc/ssh/sshd_config}}}:
{{{
ChallengeResponseAuthentication yes
UsePAM yes
}}}
 # Create a PPP sequence key for your user account.
{{{
pppauth --key
}}}
 # Generate a passcard.  Print or save it -- you'll need it to log in over SSH.
{{{
pppauth --text --next 1
}}}
 # Try logging in to test it.
{{{
ssh localhost
}}}
